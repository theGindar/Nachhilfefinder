<!DOCTYPE html>
<!--
Copyright © 2018 Patrick Günther

Dieser Quellcode ist lizenziert unter einer
Creative Commons Namensnennung 4.0 International Lizenz.
-->
<html>
    <head>
        <title>Nachhilfefinder Client</title>

        <meta charset="UTF-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <link rel="stylesheet" href="style.css">

        
    </head>
    <body>
        <h1>REST-Client Nachhilfefinder</h1>
        
            Benutzername: <input type="text" id="userinput" name="username"><br>
            Passwort: <input type="password" id="passwordinput" name="password"><br>
            <button id="button">suchen"</button>
        
        <div id="offers"></div>

        <script>
            console.log("hallo");
            $("#button").click(function () {
                var username = $("#userinput").val();
                var password = $("#passwordinput").val();
                var authkey = btoa(username + ":" + password);
                console.log("hallo");
                $("#platzhalter").empty();

                $.ajax({
                    mode: "no-cors",
                    type: "GET",
                    url: "https://localhost:8443/Nachhilfefinder/api/Offers/1",
                    /*beforeSend: function (request) {
                        console.log(request);
                        request.setRequestHeader("Authorization", "Basic YXNkZmFzZGY6YXNkZmFzZGY=");
                        
                    },*/
                    headers: {
                        "Authorization": "Basic " + "YXNkZmFzZGY6YXNkZmFzZGY="
                    },
                    success: function (){
                        alert('Thanks for your comment!'); 
                    }
                    
                    
                }).then(function (data) {
                    alert("juhuuu");
                    $('#offers').append($('<h2>', {
                        text: "Angebote:"
                    }));
                    $.each(data, function (index, element) {
                        $('#offers').append($('<div>', {
                            //text: "- " + element.name
                            text: "tralala"
                        }));
                    });
                });

                /*$.ajax({ 
                    mode: "no-cors",
                    type: "GET",
                    dataType: "json",
                    beforeSend: function (request) {
                        request.setRequestHeader("Authorization", "Basic " + authkey);
                    },
                    url: "https://localhost:8443/Nachhilfefinder/api/Offers/1",
                    success: function(data){        
                        alert(data);
                    }
                });*/

            });
            
        </script>    
    </body>
</html>
